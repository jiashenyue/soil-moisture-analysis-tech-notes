# Tech Note 3: Downloading and Preparing VIIRS Vegetation Incides Data

Shenyue Jia \| 06/04/2024

## Overview

-   This tutorial focuses on how to download VIIRS data from NASA Earthdata Search and prepare them for future use
    -   We will use VIIRS Vegetation Indices (1km, 16-day, [VNP13A2 v002](https://lpdaac.usgs.gov/products/vnp13a2v002/)) as an example
-   Some basic information about HDF (Hierarchical Data Format) data

## Search VNP13A2 data from NASA Earthdata Search

-   Following [Access Data](https://lpdaac.usgs.gov/products/vnp13a2v002/#tools) to find the download option from NASA Earthdata Search
    -   Or you can visit [NASA Earthdata Search](https://search.earthdata.nasa.gov/search) and use **VNP13A2 V002** as data collection name for searching
        -   Keep in mind that we are using the latest version of data (V002)

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/021-tech-note.png)

-   Click the green **+** sign to add the first dataset to your search
    -   VIIRS/NPP Vegetation Indices 16-Day L3 Global 1km SIN Grid V002

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/022-tech-note.png)

-   By default, we have all files of the collection we selected added for download

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/023-tech-note.png)

-   We can upload a Shapefile (or other formats) of California as our area of interest to further narrow down the search results
    -   If using a Shapefile, make sure you find all files that consist of a Shapefile

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/024-tech-note.png)

-   Select all these files and compress them to a `.zip` file

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/025-tech-note.png)

-   After uploading this file, we will find a filter has been added but it has not limited the number of granules we have

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/026-tech-note.png)

-   Collapse the panel showing data collections first
-   Click the boundary of California shown in the map after uploading the zip file to **activate** this area of interest
    -   California boundary will turn from brown to green if clicking to activate

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/027-tech-note.png)

-   Sometimes we may see a notification indicating the file we upload contains too many points and has been simplified

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/028-tech-note.png)

-   We will also add a filter for time range (01/01/2015 - 12/31/2015)

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/029-tech-note.png)

-   Two filters have been added

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/030-tech-note.png)

-   We now only have 159 granules to download

-   If looking closely at the files for download, we find California encompasses more than one tile (granule)

    -   h08v05 (vast majority of California)
    -   h08v04 (northeast corner bordering Nevada)
    -   h09v04 (northwest corner bordering Oregon)

## VIIRS data download

-   We can now click the green **Download All** button to find options for download

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/030-tech-note.png)

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/031-tech-note.png)

-   We will use a download script `.sh` rather than the direct links for download
    -   Download the script generated by NASA Earthdata

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/032-tech-note.png)

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/033-tech-note.png)

-   Refer to [this tutorial](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/01-run-shell-script-nasa-download.md) on how to correctly run this script in Windows 11
    -   Several key steps mentioned in the [tutorial](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/01-run-shell-script-nasa-download.md)
        -   Navigate to the correct folder to save data
        -   If running the script using Windows Subsystem Linux (WSL), make sure to run a Windows PowerShell command to convert the file directories in the download script to Unix-style
        -   Run the shell script (`.sh`) in WSL
