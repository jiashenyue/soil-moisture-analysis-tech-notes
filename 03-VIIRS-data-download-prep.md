# Tech Note 3: Downloading and Preparing VIIRS Vegetation Incides Data

Shenyue Jia \| 06/04/2024

## Overview

-   This tutorial focuses on how to download VIIRS data from NASA Earthdata Search and prepare them for future use
    -   We will use VIIRS Vegetation Indices (1km, 16-day, [VNP13A2 v002](https://lpdaac.usgs.gov/products/vnp13a2v002/)) as an example
-   Some basic information about HDF (Hierarchical Data Format) data

## Search VNP13A2 data from NASA Earthdata Search

- Following [Access Data](https://lpdaac.usgs.gov/products/vnp13a2v002/#tools) to find the download option from NASA Earthdata Search
  - Or you can visit [NASA Earthdata Search](https://search.earthdata.nasa.gov/search) and use **VNP13A2** as data collection name for searching

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/021-tech-note.png)

- Click the green **+** sign to add the first dataset to your search
  - VIIRS/NPP Vegetation Indices 16-Day L3 Global 1km SIN Grid V002

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/022-tech-note.png)

- We can apply conditions such as dates and geographical area of interest to further narrow down the data for download
  - In this example, we will use the year of 2015 as an example (01/01/2015-12/31/2015)

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/024-tech-note.png)

- We can also try uploading a Shapefile (or other formats) of California as our area of interest to further narrow down the search results
- If using a Shapefile, make sure you find all files that consist of a Shapefile

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/025-tech-note.png)

- Select all these files and compress them to a `.zip` file
![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/026-tech-note.png)

- Upload this zip file
- Click the boundary of California shown in the map after uploading the zip file to **activate** this area of interest
  - California boundary will turn from brown to green if clicking to activate
- Sometimes we may see a notification indicating the file we upload contains too many points and has been simplified

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/027-tech-note.png)

- Now we find the total number of available granules is much smaller than before (about 1.7 k granules)

## VIIRS data download

- We can now click the green **Download** button to find options for download

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/028-tech-note.png)

- We will use a download script `.sh` rather than the direct links for download
  - Download the script generated by NASA Earthdata
  
![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/030-tech-note.png)

![img](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/pics/031-tech-note.png)
  
- Refer to [this tutorial](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/01-run-shell-script-nasa-download.md) on how to correctly run this script in Windows 11
  - Several key steps mentioned in the[tutorial](https://github.com/jiashenyue/soil-moisture-analysis-tech-notes/blob/main/01-run-shell-script-nasa-download.md)
    - Navigate to the correct folder to save data
    - If running the script using Windows Subsystem Linux (WSL), make sure to run a Windows PowerShell command to convert the file directories in the download script to Unix-style
    - Run the shell script (`.sh`) in WSL


  
